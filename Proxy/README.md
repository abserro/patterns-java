# Структурные паттерны проектирования
В структурных паттернах рассматривается вопрос о том, как из классов и объектов образуются более крупные структуры. Структурные паттерны уровня класса используют
наследование для составления композиций из интерфейсов и реализаций. Простой пример - использование множественного наследования для объединения нескольких классов в один. В результате получается класс, обладающий свойствами всех своих родителей.  
Вместо композиции интерфейсов или реализаций структурные паттерны уровня 
объекта компонуют объекты для получения новой функциональности. Дополнительная 
гибкость в этом случае связана с возможностью изменить композицию объектов во время 
выполнения, что недопустимо для статической композиции классов.  
При этом могут использоваться следующие механизмы:
- Наследование, когда базовый класс определяет интерфейс, а подклассы -
реализацию. Структуры на основе наследования получаются статичными. 
- Композиция, когда структуры строятся путем объединения объектов некоторых классов. Композиция позволяет получать структуры, которые можно изменять во время выполнения.

## Proxy (Заместитель, суррогат)
*Суррогат или заместитель* это объект, интерфейс которого идентичен интерфейсу 
реального объекта. При первом запросе клиента заместитель создает реальный объект, 
сохраняет его адрес и затем отправляет запрос этому реальному объекту. Все последующие 
запросы просто переадресуются инкапсулированному реальному объекту. 
Существует четыре ситуации, когда можно использовать паттерн Proxy:
- **Виртуальный proxy** является заместителем объектов, создание которых обходится 
дорого. Реальный объект создается только при первом запросе/доступе клиента к 
объекту. 
- **Удаленный proxy** предоставляет локального представителя для объекта, который 
находится в другом адресном пространстве ("заглушки" в RPC и CORBA). 
- **Защитный proxy** контролирует доступ к основному объекту. "Суррогатный" объект 
предоставляет доступ к реальному объекту, только вызывающий объект имеет 
соответствующие права. 
- **Интеллектуальный proxy** выполняет дополнительные действия при доступе к 
объекту. 
Вот типичные области применения *интеллектуальных proxy*:
- Подсчет числа ссылок на реальный объект. При отсутствии ссылок память под 
объект автоматически освобождается (известен также как интеллектуальный 
указатель или smart pointer). 
- Загрузка объекта в память при первом обращении к нему. 
- Установка запрета на изменение реального объекта при обращении к нему других 
объектов. 

Структура:  
<img src="https://user-images.githubusercontent.com/107203406/235524168-21805de8-5199-4e18-9004-1016580e8dc7.png" width="40%" alt="image">

### Задание
Реализация одного из структурных паттернов проектирования - Proxy
Cоздать простейшую модель фрагмента графического редактора, позволяющую 
нарисовать на экране монитора бокс, имеющий размеры реального изображения, 
хранящегося на диске под именем TestImage. Используя паттерн «proxy» обеспечить 
свободное перемещение бокса с помощью «мыши» по экрану. При двойном нажатии 
на правую клавишу «мыши» обеспечить загрузку реального изображения в 
нарисованный бокс. 

### Решение
Диаграмма классов:  
<img src="https://user-images.githubusercontent.com/107203406/235524717-9b02b6bb-ff61-46bf-acd1-34e634fb1f94.png" width="70%" alt="image">  
При первом запуске открывается главный фрейм, на него уже добавлен элемент Panel, который отрисовывает box с таким же размером, как и тестовое изображение. При ордираном клике box перемещается на новое место (по расположению курсора в момент клика). По двойному - в box загружается само тестовое изображение.
